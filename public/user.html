<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <title>My PUGS Feed</title>
  <!-- Font Awesome -->
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.2/css/all.css">
  <!-- Bootstrap core CSS -->
  <link href="css/bootstrap.min.css" rel="stylesheet">
  <!-- Material Design Bootstrap -->
  <link href="css/mdb.min.css" rel="stylesheet">
  <!-- Your custom styles (optional) -->
  <link href="css/style.css" rel="stylesheet">
</head>

<body class="tempting-azure-gradient">
  <div class="bg-main">
    <div class="container-fluid">

      <!-- Card -->
      <div class="row" id="rowIndent">
        <div class="col-4">
          <div class="card testimonial-card" id="userCard">

            <!-- Background color -->
            <div class="card-up"></div>

            <!-- Avatar -->
            <div class="avatar mx-auto white">
              <img src="https://mdbootstrap.com/img/Photos/Avatars/img%20%2810%29.jpg" class="rounded-circle"
                alt="woman avatar">
            </div>

            <!-- Content -->
            <div class="card-body">
              <!-- Name -->
              <h4 class="card-title">Sporty McSportster</h4>
              <button class="btn btn-primary" id="createEvent-btn" data-toggle="modal" data-target="#modalEvent">Create Event</button>
            </div>

          </div>
        </div>
        <!-- /card -->

        <!-- Weather Widget -->
        <div class="row">
          <div class="col-12" id="weatherWidget">
            <ul class="list-group list-group-horizontal">
              <li class="list-group-item">Weather Today: xx/xx/xx </li>
              <li class="list-group-item">High: 79&#176; </li>
              <li class="list-group-item">Low: 56&#176; </li>
            </ul>
          </div>

          <!-- Feed Div -->
          <div class="col-12">
            <div class="card" id="feedDiv">
              <ul id='allEvents' class="list-group list-group-flush">
                <!-- <li class="list-group-item">Test Event 1</li>
                <li class="list-group-item">Test Event 2</li>
                <li class="list-group-item">Test Event 3</li> -->
              </ul>
            </div>
          </div>
          <!-- /Feed Div -->
        </div>
        <!-- /weather widget -->
      </div>
      <!-- /Card -->

      <!-- My Pugs Card -->
      <div class="row" id="rowIndent">
        <div class="col-4">
          <div class="card" id="myPugs">
            <div class="card-header text-center">
              My PUGs
            </div>
            <ul class="list-group list-group-flush text-left">
              <li class="list-group-item">Basketball @5pm</li>
              <li class="list-group-item">Badminton @7pm</li>
              <li class="list-group-item">Roller Hockey @8pm</li>
            </ul>
          </div>
        </div>


      </div>
      <!-- /My Pugs Card -->

      <!-- Copyright Card -->
      <div class="row">
        <div class="col-5 text-center">
          <div class="card" id="copyRightCard">
            <div class="card-body">
              <p class="card-title">2019 &#169; Pick Up Games!</p>
            </div>
          </div>
        </div>
      </div>

      <!-- container div -->
    </div>
    <!-- bg div -->
  </div>

  <!-- /page end-->


<!-- Modal: modalPoll -->


<div class="modal fade" id="modalEvent" tabindex="-1" role="dialog" aria-labelledby="modalEvent"
  aria-hidden="true">
  <div class="modal-dialog modal-notify modal-info" role="document">
     <div class="modal-content">
      <!--Header-->
      <div class="modal-header aqua-gradient">
        <p class="heading lead font-weight-bold">Create A PUG!
        </p>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true" class="white-text">Ã—</span>
        </button>
      </div>
  
      <!--Body-->
      <div class="modal-body">
        <div class="text-center">
          <i class="far fa-calendar-plus fa-4x mb-3 animated rotateIn"></i>
        </div>
  
        <hr>
        <!--action="/newevent" method="POST"-->
        <div  class="form-group">
          <label for="materialContactFormName" class="pl-1">EVENT:</label>
          <input type="text" id="materialContactFormName" class="form-control pl-1 event-input">

        </div>
        <!-- Radio -->
        <div class="row">
            <div class="form-group col-6">
                <label for="event_Time" class="pl-1">EVENT TIME:</label>
                <input class="form-control event-input" type="time" id="event_Time">
              </div>
                     <!-- Location -->
              <div class="form-group col-6">
              <label for="event_Loc" class="pl-1">CITY/STATE:</label>
              <select class="browser-default custom-select event-input" id="event_Loc">
                <option selected>Location</option>
                <option value="1">APPLE VALLEY</option>
                <option value="2">BLAINE</option>
                <option value="3">BLOOMINGTON</option>
                <option value="4">BROOKLYN PARK</option>
                <option value="5">BURNSVILLE</option>
                <option value="6">COON RAPIDS</option>
                <option value="7">DULUTH</option>
                <option value="8">EAGAN</option>
                <option value="9">EDEN PRAIRIE</option>
                <option value="10">EDINA</option>
                <option value="11">LAKEVILLE</option>
                <option value="12">MAPLE GROVE</option>
                <option value="14">MINNEAPOLIS</option>
                <option value="15">MINNETONKA</option>
                <option value="16">PLYMOUTH</option>
                <option value="17">ROCHESTER</option>
                <option value="18">ST. CLOUD</option>
                <option value="19">ST. LOUIS PARK</option>
                <option value="20">ST. PAUL</option>
                <option value="20">WOODBURY</option>
              </select>
              </div>
        </div>
        <!-- DateTime -->
        <div class="form-group">
            <label for="form79textarea" class="pl-1">DESCRIPTION:</label>
          <textarea type="text" id="form79textarea" class="md-textarea form-control" rows="3"></textarea>
         
        </div>
  
      </div>
  
      <!--Footer-->
      <div class="modal-footer justify-content-center">
        <a id='goTime' type="submit" class="btn btn-primary waves-effect waves-light">Send
          <i class="fa fa-paper-plane ml-1"></i>
        </a>
      </div>
    </div>
  </div>
</div>


  <!-- SCRIPTS -->
  <!-- JQuery -->
  <script type="text/javascript" src="js/jquery-3.4.1.min.js"></script>
  <!-- Bootstrap tooltips -->
  <script type="text/javascript" src="js/popper.min.js"></script>
  <!-- Bootstrap core JavaScript -->
  <script type="text/javascript" src="js/bootstrap.min.js"></script>
  <!-- MDB core JavaScript -->
  <script type="text/javascript" src="js/mdb.min.js"></script>

  <script type="text/javascript" src="./js/app.js"></script>
  <script>
      $(document).ready(function(){
          $.get('/findall', {
              type: 'GET'
          }).then(function(result){
      
            for (let i=0; i<result.length; i++){
                let events = $('<li>')
                events.addClass("list-group-item row");
                events.addClass("eventRendering");
                let name = $('<p>');
                name.addClass('col-4');
                name.text(result[i].name);
                let time = $('<p>');
                time.addClass('col-4');
                time.text(result[i].StartTime);
                let city = $('<p>');
                city.addClass('col-4');
                city.text(result[i].city);
                $('.eventRendering').append(time, city, name);
                $("#allEvents").prepend(events); 
                }
          })
          
          $('#goTime').on('click', function(event){
              event.preventDefault();
              var newEvent = {
                  name: $('#materialContactFormName').val().trim(),
                  city: $('#event_Loc').val().trim(),
                  StartTime: $('#event_Time').val()
              }
             console.log(newEvent)
               $.post('/newevent', {
                 type: 'POST',
                 data: newEvent
              }).then(function(result){
                  console.log(result);
                  location.reload();
              });
          }) 
      })
  
  </script>
</body>

</html>